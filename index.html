<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>index - devolve documentation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- styles -->
	<link href="bootDoc/assets/css/bootstrap.css" rel="stylesheet">
	<style type="text/css">
		body {
		padding-top: 60px;
		padding-bottom: 40px;
		}
		.sidebar-nav {
		padding: 9px 0;
		}
	</style>
	<link href="bootDoc/assets/css/bootstrap-responsive.css" rel="stylesheet">
	<link href="bootDoc/bootdoc.css" rel="stylesheet">

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- fav and touch icons -->
	<link rel="shortcut icon" href="bootDoc/assets/ico/favicon.ico">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootDoc/assets/ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootDoc/assets/ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="bootDoc/assets/ico/apple-touch-icon-57-precomposed.png">
	
	<!-- Introduce DDoc settings required by JavaScript -->
	<script type="text/javascript">
		var Title = 'index';
		var SourceRepository = 'http://github.com/ALSchwalm/devolve/tree/master';
		var PackageSeparator = '.';
	</script>
	
	<style type="text/css">
		.ddoc-icon-variable { background-image: url('bootDoc/ddoc-icons/var.png'); }
		.ddoc-icon-function { background-image: url('bootDoc/ddoc-icons/func.png'); }
		.ddoc-icon-property { background-image: url('bootDoc/ddoc-icons/property.png'); }
		.ddoc-icon-struct { background-image: url('bootDoc/ddoc-icons/struct.png'); }
		.ddoc-icon-class { background-image: url('bootDoc/ddoc-icons/class.png'); }
		.ddoc-icon-enum { background-image: url('bootDoc/ddoc-icons/enum.png'); }
		.ddoc-icon-template { background-image: url('bootDoc/ddoc-icons/template.png'); }
	</style>
	</head>

	<body>
	<!--
	JavaScript reaps the module list from this element.
	This is required for the MODULES macro to be reusable
	in a noscript element later.
	-->
	<ul id="module-list-source" class="hidden">
		
	<li class="sidebar-list-entry tree-leaf"><a href="baseGA.html" title="baseGA"><i class="icon-th"></i>baseGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="simpleGA.html" title="simpleGA"><i class="icon-th"></i>simpleGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="selector.html" title="selector"><i class="icon-th"></i>selector</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="statistics.html" title="statistics"><i class="icon-th"></i>statistics</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="utils.html" title="utils"><i class="icon-th"></i>utils</a></li>
        
        <li class="sidebar-list-entry tree-leaf"><a href="list.crossover.html" title="list.crossover"><i class="icon-th"></i>list.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.generator.html" title="list.generator"><i class="icon-th"></i>list.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.mutator.html" title="list.mutator"><i class="icon-th"></i>list.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.listGA.html" title="list.listGA"><i class="icon-th"></i>list.listGA</a></li>
        
        <li class="sidebar-list-entry tree-leaf"><a href="tree.crossover.html" title="tree.crossover"><i class="icon-th"></i>tree.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.generator.html" title="tree.generator"><i class="icon-th"></i>tree.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.mutator.html" title="tree.mutator"><i class="icon-th"></i>tree.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.treeGA.html" title="tree.treeGA"><i class="icon-th"></i>tree.treeGA</a></li>

        <li class="sidebar-list-entry tree-leaf"><a href="bstring.bstringGA.html" title="bstring.bstringGA"><i class="icon-th"></i>bstring.bstringGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.crossover.html" title="bstring.crossover"><i class="icon-th"></i>bstring.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.generator.html" title="bstring.generator"><i class="icon-th"></i>bstring.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.mutator.html" title="bstring.mutator"><i class="icon-th"></i>bstring.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.bitset.html" title="bstring.bitset"><i class="icon-th"></i>bstring.bitset</a></li>

        <li class="sidebar-list-entry tree-leaf"><a href="net.netGA.html" title="net.netGA"><i class="icon-th"></i>net.netGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.crossover.html" title="net.crossover"><i class="icon-th"></i>net.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.generator.html" title="net.generator"><i class="icon-th"></i>net.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.mutator.html" title="net.mutator"><i class="icon-th"></i>net.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.network.html" title="net.network"><i class="icon-th"></i>net.network</a></li>
	</ul>
	
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<a class="brand" href="index.html">devolve</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li class="active"><a href="index.html">Reference</a></li>
					</ul>
					
					<form id="gotosymbol" class="navbar-search pull-left hidden">
						<input type="text" class="search-query" placeholder="Go to symbol in index" data-provide="typeahead" data-items="4">
					</form>
					
					<p class="navbar-text pull-right"><a href="https://github.com/ALSchwalm/devolve">Github Page</a></p>
				</div><!--/.nav-collapse -->
			</div>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span2">
				<div class="well sidebar-nav">
				<ul class="nav nav-list">
					<li id="module-list" class="nav-header sidebar-list-entry">Modules<li>
					<noscript>
						
	<li class="sidebar-list-entry tree-leaf"><a href="baseGA.html" title="baseGA"><i class="icon-th"></i>baseGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="simpleGA.html" title="simpleGA"><i class="icon-th"></i>simpleGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="selector.html" title="selector"><i class="icon-th"></i>selector</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="statistics.html" title="statistics"><i class="icon-th"></i>statistics</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="utils.html" title="utils"><i class="icon-th"></i>utils</a></li>
        
        <li class="sidebar-list-entry tree-leaf"><a href="list.crossover.html" title="list.crossover"><i class="icon-th"></i>list.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.generator.html" title="list.generator"><i class="icon-th"></i>list.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.mutator.html" title="list.mutator"><i class="icon-th"></i>list.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="list.listGA.html" title="list.listGA"><i class="icon-th"></i>list.listGA</a></li>
        
        <li class="sidebar-list-entry tree-leaf"><a href="tree.crossover.html" title="tree.crossover"><i class="icon-th"></i>tree.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.generator.html" title="tree.generator"><i class="icon-th"></i>tree.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.mutator.html" title="tree.mutator"><i class="icon-th"></i>tree.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="tree.treeGA.html" title="tree.treeGA"><i class="icon-th"></i>tree.treeGA</a></li>

        <li class="sidebar-list-entry tree-leaf"><a href="bstring.bstringGA.html" title="bstring.bstringGA"><i class="icon-th"></i>bstring.bstringGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.crossover.html" title="bstring.crossover"><i class="icon-th"></i>bstring.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.generator.html" title="bstring.generator"><i class="icon-th"></i>bstring.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.mutator.html" title="bstring.mutator"><i class="icon-th"></i>bstring.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="bstring.bitset.html" title="bstring.bitset"><i class="icon-th"></i>bstring.bitset</a></li>

        <li class="sidebar-list-entry tree-leaf"><a href="net.netGA.html" title="net.netGA"><i class="icon-th"></i>net.netGA</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.crossover.html" title="net.crossover"><i class="icon-th"></i>net.crossover</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.generator.html" title="net.generator"><i class="icon-th"></i>net.generator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.mutator.html" title="net.mutator"><i class="icon-th"></i>net.mutator</a></li>
        <li class="sidebar-list-entry tree-leaf"><a href="net.network.html" title="net.network"><i class="icon-th"></i>net.network</a></li>
					</noscript>
					<li id="symbol-list" class="nav-header sidebar-list-entry hidden">index</li>
				</ul>
				</div><!--/.well -->
			</div><!--/span-->
			
			<div class="span10">
				<div class="row-fluid">
					<div class="span11">
						<ul id="module-breadcrumb" class="breadcrumb">
							<noscript><h1>index</h1></noscript>
						</ul>
						
					</div>
					<div class="span1 offset11">
						<a href="index.html"><img src="bootDoc/assets/img/icon-github.png" alt="devolve"/></a>
					</div>
				</div>
				<div id="declaration-list">
					<!-- Generated by Ddoc from index.d -->


<h1>devolve</h1>
devolve is a genetic programming framework designed to take advantage of
the D programming language's powerful template system and easy concurrency.

<dl><dl>

<h2>Basic Usage</h2>
Examples of usage can be found in the 'examples' folder. To use the library simply
`import devolve`. If only one genome representation is required, it may be sufficient
to `import devolve.tree`, for example. The general usage of the library is as follows:
<dl>
<ol> <li>Select a genome representation (i.e.,
     <a href="list.listGA.html">list</a>,
     <a href="tree.treeGA.html">tree</a>, etc.). These should typically be
able to represent a solution to your problem easily.</li>

  <li>Choose from one of the existing generators / mutators / crossover functions. For
example, mutators for the <a href="tree.treeGA.html">tree</a> representation live in
<a href="tree.mutator.html">devolve.tree.mutator</a>.</li>

  <li>Write a fitness function for your application. This function should accept an individual
of the type chosen in step 1. (so for a `list`, a static or dynamically sized array).</li>

  <li>Construct a Genetic Algorithm using the parts chosen or written in the above steps.
These follow the convention of 'NameGA', so for `list`, the class is named `ListGA`.</li>

  <li>Set additional information such as the mutation rate / population ordering (is a
larger or smaller number more or less fit) or termination criteria.</li>

  <li>Call `evolve()`, specifying the maximum number of generations over which the
algorithm should run.</li>

  <li>You're finished. Sit back and wait while the algorithm runs.</li></ol>

<dl>
  
<h2>Examples</h2>

These examples and others examples may be found in the
<a href="https://github.com/ALSchwalm/devolve/tree/master/examples">
examples folder.</a>

<h3>The Traveling Salesman</h3>
<pre class="d_code"><span class="d_keyword">import</span> devolve.list;

<span class="d_keyword">import</span> std.algorithm;

<span class="d_keyword">immutable</span> <span class="d_keyword">uint</span>[<span class="d_keyword">char</span>[2]] distances;

<span class="d_keyword">static</span> <span class="d_keyword">this</span>() {
    <span class="d_comment">//Distances between every city
</span>    distances = [
        <span class="d_string">"ab"</span>: 20u,
        <span class="d_string">"ac"</span>: 42u,
        <span class="d_string">"ad"</span>: 35u,
        <span class="d_string">"bc"</span>: 30u,
        <span class="d_string">"bd"</span>: 34u,
        <span class="d_string">"cd"</span>: 12u
        ];
}

<span class="d_comment">//An individual is an ordering of these 'cities'
</span><span class="d_keyword">alias</span> individual = <span class="d_keyword">char</span>[4];

<span class="d_comment">/* 
 * Basic fitness function. Fitness is the total distance
 * traveled by following the input path.
 */</span>
<span class="d_keyword">double</span> fitness(<span class="d_keyword">in</span> individual ind) {
    <span class="d_keyword">double</span> total = 0;

    <span class="d_keyword">for</span>(<span class="d_keyword">uint</span> i=0; i &lt; ind.length-1; ++i) {
        <span class="d_keyword">char</span> lower = min(ind[i], ind[i+1]);
        <span class="d_keyword">char</span> higher = max(ind[i], ind[i+1]);
        total += distances[[lower,  higher]];
    }
    <span class="d_keyword">return</span> total;
};

<span class="d_keyword">void</span> main() {

    <span class="d_keyword">auto</span> ga = <span class="d_keyword">new</span> ListGA!(
        
            <span class="d_comment">//Population of 10 individuals
</span>            individual, 10,
            
            <span class="d_comment">//Fitness: The above fitness function
</span>            fitness,
            
            <span class="d_comment">//Generator: The initial population will be copies of 'cbad'
</span>            generator.preset!('c', 'b', 'a', 'd'),
            
            <span class="d_comment">//Selector: Select the top 2 individuals each generation
</span>            selector.topPar!2,

            <span class="d_comment">//Crossover: Just copy one of the parents
</span>            crossover.randomCopy,

            <span class="d_comment">//Mutation: Swap the alleles (cities)
</span>            mutator.randomSwap,

            <span class="d_comment">//Statistics must also know to record the historically lowest value
</span>            <span class="d_comment">//and selector should order with lowest value first (shortest distance)
</span>            <span class="d_string">"a &lt; b"</span>);

    <span class="d_comment">//Set a 10% mutation rate
</span>    ga.mutationRate = 0.1f;

    <span class="d_comment">//Print statistics every 5 generations
</span>    ga.statFrequency = 5;

    <span class="d_comment">// Run for 30 generations. Converges rapidly on abcd or dcba
</span>    ga.evolve(30);
}
</pre>

<h3>Symbolic Regression</h3>
<pre class="d_code"><span class="d_keyword">import</span> devolve.tree;

<span class="d_keyword">import</span> std.math, std.conv, std.range;
<span class="d_keyword">import</span> std.typecons, std.algorithm;

<span class="d_comment">//Points taken from the equation `x^2 + 2x + sin(x)^2 - 23`
</span><span class="d_keyword">double</span> f(<span class="d_keyword">double</span> x) {<span class="d_keyword">return</span> x*x + 2*x+sin(x)*sin(x)-23;}

<span class="d_keyword">immutable</span> Tuple!(<span class="d_keyword">double</span>, <span class="d_keyword">double</span>)[] points;
<span class="d_keyword">static</span> <span class="d_keyword">this</span>() {
    points = array(zip(iota(-10, 10, 0.5),
                       map!f(iota(-10, 10, 0.5)))).idup;
}

<span class="d_keyword">double</span> x;

<span class="d_comment">/*
 * Evaluate function `g`. Fitness is the cumulative difference between g(x)
 * and a given point (x, y).
 */</span>

<span class="d_keyword">double</span> fitness(<span class="d_keyword">ref</span> Tree!<span class="d_keyword">double</span> algorithm) {
    <span class="d_keyword">double</span> fit = 1;

    <span class="d_keyword">foreach</span>(<span class="d_keyword">ref</span> pair; points) {
        x = pair[0];
        fit += abs(algorithm.eval() - pair[1]);
    }
    <span class="d_keyword">return</span> fit;
}

<span class="d_keyword">void</span> main() {

    <span class="d_comment">//Generator: Class used to generate trees from the registered functions
</span>    TreeGenerator!<span class="d_keyword">double</span> gen;

    <span class="d_comment">//Register simple functions, only parameter names of 'a' and 'b' are supported
</span>    gen.register!<span class="d_string">"-a"</span>(<span class="d_string">"negative"</span>);
    gen.register!<span class="d_string">"a*a"</span>(<span class="d_string">"square"</span>);
    gen.register!<span class="d_string">"a+b"</span>(<span class="d_string">"sum"</span>);
    gen.register!<span class="d_string">"a-b"</span>(<span class="d_string">"difference"</span>);
    gen.register!<span class="d_string">"a*b"</span>(<span class="d_string">"product"</span>);

    <span class="d_comment">//Lambdas can also be used and support any number of arguments
</span>    gen.register!((<span class="d_keyword">double</span> a) {<span class="d_keyword">return</span> to!<span class="d_keyword">double</span>(sin(a));})(<span class="d_string">"sin"</span>);
    gen.register!((<span class="d_keyword">double</span> a) {<span class="d_keyword">return</span> to!<span class="d_keyword">double</span>(cos(a));})(<span class="d_string">"cos"</span>);

    <span class="d_keyword">double</span> div(<span class="d_keyword">double</span> a, <span class="d_keyword">double</span> b) {
        <span class="d_keyword">if</span> (!isInfinity(a/b) &amp;&amp; b != 0) {
            <span class="d_keyword">return</span> a/b;
        }
        <span class="d_keyword">else</span> {
            <span class="d_keyword">return</span> 0;
        }
    }
    gen.register(&amp;div, <span class="d_string">"div"</span>);

    <span class="d_comment">//Register an input value. This is effectivly a shorthand for
</span>    <span class="d_comment">//  'gen.register(function(){return x;}, "x");'
</span>    gen.registerInput!x;

    <span class="d_comment">//Register a range of random constants which may appear in the generated algorithm
</span>    gen.registerConstantRange(-10.0f, 10.0f);
    
    <span class="d_keyword">auto</span> ga = <span class="d_keyword">new</span> TreeGA!(<span class="d_keyword">double</span>,

                          <span class="d_comment">//Population size
</span>                          1500,

                          <span class="d_comment">//Maximum depth of tree
</span>                          5,

                          <span class="d_comment">//Fitness: the above fitness function
</span>                          fitness,

                          <span class="d_comment">/*
                           * Selector: Select the top 100 members by evalutating each
                           * member in parallel.
                           */</span>
                          selector.topPar!50,

                          <span class="d_comment">/*
                           * Crossover: Copy one of the parents, and replace a random 
                           * node with a subtree from the other parent
                           */</span>
                          crossover.singlePoint,

                          <span class="d_comment">//Mutator: Replace a random node with a new random subtree
</span>                          mutator.randomBranch,

                          <span class="d_comment">//More fit values are smaller
</span>                          <span class="d_string">"a &lt; b"</span>)(gen);

    <span class="d_comment">//Set a mutation rate
</span>    ga.mutationRate = 0.07;
    
    <span class="d_comment">//Print statistics every 20 generations
</span>    ga.statFrequency = 20;

    <span class="d_comment">//Stop if any individual has the termination value (or lower due to the above comp function)
</span>    ga.terminationValue = 0;

    <span class="d_comment">//Automatically output a graphviz 'dot' file to 'best.dot' upon termination
</span>    ga.autoGenerateGraph = <span class="d_keyword">true</span>;
    
    <span class="d_comment">/*
     * Preform symbolic regression, grow for 600 generations. Takes approximately 
     * 60 seconds on quad core laptop to generate a function with a fitness of ~10.
     */</span>
    ga.evolve(600);

}
</pre>

				</div>
				
				<hr>
				
				<footer class="pull-left">
					<p>Page generated with <a href="https://github.com/JakobOvrum/bootDoc">bootDoc</a>.</p>
				</footer>
				
				<footer class="pull-right">
					<p>&copy; Adam Schwalm 2013-2014</p>
				</footer>
			</div>
		</div>
	</div><!--/.fluid-container-->

	<!-- Bootstrap javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="bootDoc/assets/js/jquery.min.js"></script>
	<script src="bootDoc/assets/js/bootstrap.min.js"></script>
	
	<!-- bootDoc javascript
	================================================== -->
	<script src="bootDoc/bootdoc.js"></script>
	
	</body>
</html>
